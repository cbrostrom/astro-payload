---
import Layout from "../../layouts/Layout.astro";
import type { Post } from "../../types";

import RichText from "../../components/RichText.astro";
export async function getStaticPaths() {
  const paths = (
    await (await fetch("http://payload:3001/api/posts")).json()
  ).docs.map((post: Post) => ({
    params: { id: post.id },
  }));
  return paths;
}
const { id } = Astro.params;
const post = (await (
  await fetch(`http://payload:3001/api/posts/${id}`)
).json()) as Post;
---

<Layout title={post.title!}>
  <div class="max-w-3xl mx-auto space-y-3 my-3">
    <a href="/">BACK</a>
    <h1>{post.title}</h1>
    {post.content && <RichText content={post.content} />}
  </div>
</Layout>
